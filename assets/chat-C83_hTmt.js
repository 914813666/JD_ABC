import{_ as ln,i as rn,f as w,l as cn,p as Ke,b as U,d as x,h as j,w as Se,e as A,t as Be,F as un,g as fn,q as pn,u as An,a as yn,s as Gt,r as _,v as Sn,j as In,c as Rn,x as bn,y as Cn,z as wn,k as Ln,A as Dn,B as On,o as Nn,C as Wt,D as xn,E as ut,G as Mn,H as kn,I as Pn,J as Et,K as Yt,L as Un,M as qt,N as Fn,O as ye,P as Vt,Q as zn}from"./index-C_kvG6l8.js";import{s as Hn,_ as Bn}from"./send-Cd0KvxUx.js";import{m as At,H as He,s as Gn,c as Wn,a as $t}from"./index-F-jQkbkM.js";import{c as yt,a as Yn,f as qn}from"./copy_success-Ju8B3ISh.js";import{r as Vn,a as $n,g as Xn,p as jn,b as Xt,c as ft,d as jt}from"./pic_save-mrS83vCy.js";import{S as Zn}from"./singletonStorage-CNdRZPSt.js";/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:mn,setPrototypeOf:Zt,isFrozen:Kn,getPrototypeOf:Qn,getOwnPropertyDescriptor:Jn}=Object;let{freeze:F,seal:W,create:dn}=Object,{apply:wt,construct:Lt}=typeof Reflect<"u"&&Reflect;F||(F=function(o){return o});W||(W=function(o){return o});wt||(wt=function(o,p,c){return o.apply(p,c)});Lt||(Lt=function(o,p){return new o(...p)});const pt=z(Array.prototype.forEach),eo=z(Array.prototype.lastIndexOf),Kt=z(Array.prototype.pop),Ve=z(Array.prototype.push),to=z(Array.prototype.splice),dt=z(String.prototype.toLowerCase),St=z(String.prototype.toString),Qt=z(String.prototype.match),$e=z(String.prototype.replace),no=z(String.prototype.indexOf),oo=z(String.prototype.trim),Z=z(Object.prototype.hasOwnProperty),P=z(RegExp.prototype.test),Xe=ao(TypeError);function z(u){return function(o){o instanceof RegExp&&(o.lastIndex=0);for(var p=arguments.length,c=new Array(p>1?p-1:0),b=1;b<p;b++)c[b-1]=arguments[b];return wt(u,o,c)}}function ao(u){return function(){for(var o=arguments.length,p=new Array(o),c=0;c<o;c++)p[c]=arguments[c];return Lt(u,p)}}function f(u,o){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dt;Zt&&Zt(u,null);let c=o.length;for(;c--;){let b=o[c];if(typeof b=="string"){const H=p(b);H!==b&&(Kn(o)||(o[c]=H),b=H)}u[b]=!0}return u}function so(u){for(let o=0;o<u.length;o++)Z(u,o)||(u[o]=null);return u}function fe(u){const o=dn(null);for(const[p,c]of mn(u))Z(u,p)&&(Array.isArray(c)?o[p]=so(c):c&&typeof c=="object"&&c.constructor===Object?o[p]=fe(c):o[p]=c);return o}function je(u,o){for(;u!==null;){const c=Jn(u,o);if(c){if(c.get)return z(c.get);if(typeof c.value=="function")return z(c.value)}u=Qn(u)}function p(){return null}return p}const Jt=F(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),It=F(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rt=F(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lo=F(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bt=F(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),io=F(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),en=F(["#text"]),tn=F(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ct=F(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nn=F(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mt=F(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ro=W(/\{\{[\w\W]*|[\w\W]*\}\}/gm),co=W(/<%[\w\W]*|[\w\W]*%>/gm),uo=W(/\$\{[\w\W]*/gm),fo=W(/^data-[\-\w.\u00B7-\uFFFF]+$/),po=W(/^aria-[\-\w]+$/),gn=W(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mo=W(/^(?:\w+script|data):/i),go=W(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hn=W(/^html$/i),ho=W(/^[a-z][.\w]*(-[.\w]+)+$/i);var on=Object.freeze({__proto__:null,ARIA_ATTR:po,ATTR_WHITESPACE:go,CUSTOM_ELEMENT:ho,DATA_ATTR:fo,DOCTYPE_NAME:hn,ERB_EXPR:co,IS_ALLOWED_URI:gn,IS_SCRIPT_OR_DATA:mo,MUSTACHE_EXPR:ro,TMPLIT_EXPR:uo});const Ze={element:1,text:3,progressingInstruction:7,comment:8,document:9},_o=function(){return typeof window>"u"?null:window},vo=function(o,p){if(typeof o!="object"||typeof o.createPolicy!="function")return null;let c=null;const b="data-tt-policy-suffix";p&&p.hasAttribute(b)&&(c=p.getAttribute(b));const H="dompurify"+(c?"#"+c:"");try{return o.createPolicy(H,{createHTML(Y){return Y},createScriptURL(Y){return Y}})}catch{return console.warn("TrustedTypes policy "+H+" could not be created."),null}},an=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function _n(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_o();const o=l=>_n(l);if(o.version="3.2.6",o.removed=[],!u||!u.document||u.document.nodeType!==Ze.document||!u.Element)return o.isSupported=!1,o;let{document:p}=u;const c=p,b=c.currentScript,{DocumentFragment:H,HTMLTemplateElement:Y,Node:Ie,Element:pe,NodeFilter:K,NamedNodeMap:Q=u.NamedNodeMap||u.MozNamedAttrMap,HTMLFormElement:B,DOMParser:Qe,trustedTypes:O}=u,q=pe.prototype,ae=je(q,"cloneNode"),Re=je(q,"remove"),be=je(q,"nextSibling"),Oe=je(q,"childNodes"),me=je(q,"parentNode");if(typeof Y=="function"){const l=p.createElement("template");l.content&&l.content.ownerDocument&&(p=l.content.ownerDocument)}let y,se="";const{implementation:Ne,createNodeIterator:Je,createDocumentFragment:et,getElementsByTagName:tt}=p,{importNode:xe}=c;let d=an();o.isSupported=typeof mn=="function"&&typeof me=="function"&&Ne&&Ne.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:de,ERB_EXPR:Me,TMPLIT_EXPR:Ce,DATA_ATTR:T,ARIA_ATTR:gt,IS_SCRIPT_OR_DATA:nt,ATTR_WHITESPACE:ot,CUSTOM_ELEMENT:ht}=on;let{IS_ALLOWED_URI:Ge}=on,S=null;const at=f({},[...Jt,...It,...Rt,...bt,...en]);let I=null;const We=f({},[...tn,...Ct,...nn,...mt]);let v=Object.seal(dn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),we=null,ge=null,he=!0,ke=!0,st=!1,lt=!0,_e=!1,le=!0,ie=!1,Pe=!1,Ye=!1,N=!1,Le=!1,ve=!1,it=!0,n=!1;const a="user-content-";let m=!0,r=!1,i={},g=null;const L=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let D=null;const J=f({},["audio","video","img","source","image","track"]);let ee=null;const De=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Te="http://www.w3.org/1998/Math/MathML",re="http://www.w3.org/2000/svg",V="http://www.w3.org/1999/xhtml";let te=V,Ee=!1,Ue=null;const $=f({},[Te,re,V],St);let ne=f({},["mi","mo","mn","ms","mtext"]),X=f({},["annotation-xml"]);const rt=f({},["title","style","font","a","script"]);let Ae=null;const E=["application/xhtml+xml","text/html"],ct="text/html";let R=null,Fe=null;const vn=p.createElement("form"),Dt=function(e){return e instanceof RegExp||e instanceof Function},_t=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Fe&&Fe===e)){if((!e||typeof e!="object")&&(e={}),e=fe(e),Ae=E.indexOf(e.PARSER_MEDIA_TYPE)===-1?ct:e.PARSER_MEDIA_TYPE,R=Ae==="application/xhtml+xml"?St:dt,S=Z(e,"ALLOWED_TAGS")?f({},e.ALLOWED_TAGS,R):at,I=Z(e,"ALLOWED_ATTR")?f({},e.ALLOWED_ATTR,R):We,Ue=Z(e,"ALLOWED_NAMESPACES")?f({},e.ALLOWED_NAMESPACES,St):$,ee=Z(e,"ADD_URI_SAFE_ATTR")?f(fe(De),e.ADD_URI_SAFE_ATTR,R):De,D=Z(e,"ADD_DATA_URI_TAGS")?f(fe(J),e.ADD_DATA_URI_TAGS,R):J,g=Z(e,"FORBID_CONTENTS")?f({},e.FORBID_CONTENTS,R):L,we=Z(e,"FORBID_TAGS")?f({},e.FORBID_TAGS,R):fe({}),ge=Z(e,"FORBID_ATTR")?f({},e.FORBID_ATTR,R):fe({}),i=Z(e,"USE_PROFILES")?e.USE_PROFILES:!1,he=e.ALLOW_ARIA_ATTR!==!1,ke=e.ALLOW_DATA_ATTR!==!1,st=e.ALLOW_UNKNOWN_PROTOCOLS||!1,lt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=e.SAFE_FOR_TEMPLATES||!1,le=e.SAFE_FOR_XML!==!1,ie=e.WHOLE_DOCUMENT||!1,N=e.RETURN_DOM||!1,Le=e.RETURN_DOM_FRAGMENT||!1,ve=e.RETURN_TRUSTED_TYPE||!1,Ye=e.FORCE_BODY||!1,it=e.SANITIZE_DOM!==!1,n=e.SANITIZE_NAMED_PROPS||!1,m=e.KEEP_CONTENT!==!1,r=e.IN_PLACE||!1,Ge=e.ALLOWED_URI_REGEXP||gn,te=e.NAMESPACE||V,ne=e.MATHML_TEXT_INTEGRATION_POINTS||ne,X=e.HTML_INTEGRATION_POINTS||X,v=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(v.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(v.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(v.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(ke=!1),Le&&(N=!0),i&&(S=f({},en),I=[],i.html===!0&&(f(S,Jt),f(I,tn)),i.svg===!0&&(f(S,It),f(I,Ct),f(I,mt)),i.svgFilters===!0&&(f(S,Rt),f(I,Ct),f(I,mt)),i.mathMl===!0&&(f(S,bt),f(I,nn),f(I,mt))),e.ADD_TAGS&&(S===at&&(S=fe(S)),f(S,e.ADD_TAGS,R)),e.ADD_ATTR&&(I===We&&(I=fe(I)),f(I,e.ADD_ATTR,R)),e.ADD_URI_SAFE_ATTR&&f(ee,e.ADD_URI_SAFE_ATTR,R),e.FORBID_CONTENTS&&(g===L&&(g=fe(g)),f(g,e.FORBID_CONTENTS,R)),m&&(S["#text"]=!0),ie&&f(S,["html","head","body"]),S.table&&(f(S,["tbody"]),delete we.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xe('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xe('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=e.TRUSTED_TYPES_POLICY,se=y.createHTML("")}else y===void 0&&(y=vo(O,b)),y!==null&&typeof se=="string"&&(se=y.createHTML(""));F&&F(e),Fe=e}},Ot=f({},[...It,...Rt,...lo]),Nt=f({},[...bt,...io]),Tn=function(e){let t=me(e);(!t||!t.tagName)&&(t={namespaceURI:te,tagName:"template"});const s=dt(e.tagName),h=dt(t.tagName);return Ue[e.namespaceURI]?e.namespaceURI===re?t.namespaceURI===V?s==="svg":t.namespaceURI===Te?s==="svg"&&(h==="annotation-xml"||ne[h]):!!Ot[s]:e.namespaceURI===Te?t.namespaceURI===V?s==="math":t.namespaceURI===re?s==="math"&&X[h]:!!Nt[s]:e.namespaceURI===V?t.namespaceURI===re&&!X[h]||t.namespaceURI===Te&&!ne[h]?!1:!Nt[s]&&(rt[s]||!Ot[s]):!!(Ae==="application/xhtml+xml"&&Ue[e.namespaceURI]):!1},oe=function(e){Ve(o.removed,{element:e});try{me(e).removeChild(e)}catch{Re(e)}},ze=function(e,t){try{Ve(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch{Ve(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is")if(N||Le)try{oe(t)}catch{}else try{t.setAttribute(e,"")}catch{}},xt=function(e){let t=null,s=null;if(Ye)e="<remove></remove>"+e;else{const C=Qt(e,/^[\r\n\t ]+/);s=C&&C[0]}Ae==="application/xhtml+xml"&&te===V&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const h=y?y.createHTML(e):e;if(te===V)try{t=new Qe().parseFromString(h,Ae)}catch{}if(!t||!t.documentElement){t=Ne.createDocument(te,"template",null);try{t.documentElement.innerHTML=Ee?se:h}catch{}}const M=t.body||t.documentElement;return e&&s&&M.insertBefore(p.createTextNode(s),M.childNodes[0]||null),te===V?tt.call(t,ie?"html":"body")[0]:ie?t.documentElement:M},Mt=function(e){return Je.call(e.ownerDocument||e,e,K.SHOW_ELEMENT|K.SHOW_COMMENT|K.SHOW_TEXT|K.SHOW_PROCESSING_INSTRUCTION|K.SHOW_CDATA_SECTION,null)},vt=function(e){return e instanceof B&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof Q)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},kt=function(e){return typeof Ie=="function"&&e instanceof Ie};function ce(l,e,t){pt(l,s=>{s.call(o,e,t,Fe)})}const Pt=function(e){let t=null;if(ce(d.beforeSanitizeElements,e,null),vt(e))return oe(e),!0;const s=R(e.nodeName);if(ce(d.uponSanitizeElement,e,{tagName:s,allowedTags:S}),le&&e.hasChildNodes()&&!kt(e.firstElementChild)&&P(/<[/\w!]/g,e.innerHTML)&&P(/<[/\w!]/g,e.textContent)||e.nodeType===Ze.progressingInstruction||le&&e.nodeType===Ze.comment&&P(/<[/\w]/g,e.data))return oe(e),!0;if(!S[s]||we[s]){if(!we[s]&&Ft(s)&&(v.tagNameCheck instanceof RegExp&&P(v.tagNameCheck,s)||v.tagNameCheck instanceof Function&&v.tagNameCheck(s)))return!1;if(m&&!g[s]){const h=me(e)||e.parentNode,M=Oe(e)||e.childNodes;if(M&&h){const C=M.length;for(let G=C-1;G>=0;--G){const ue=ae(M[G],!0);ue.__removalCount=(e.__removalCount||0)+1,h.insertBefore(ue,be(e))}}}return oe(e),!0}return e instanceof pe&&!Tn(e)||(s==="noscript"||s==="noembed"||s==="noframes")&&P(/<\/no(script|embed|frames)/i,e.innerHTML)?(oe(e),!0):(_e&&e.nodeType===Ze.text&&(t=e.textContent,pt([de,Me,Ce],h=>{t=$e(t,h," ")}),e.textContent!==t&&(Ve(o.removed,{element:e.cloneNode()}),e.textContent=t)),ce(d.afterSanitizeElements,e,null),!1)},Ut=function(e,t,s){if(it&&(t==="id"||t==="name")&&(s in p||s in vn))return!1;if(!(ke&&!ge[t]&&P(T,t))){if(!(he&&P(gt,t))){if(!I[t]||ge[t]){if(!(Ft(e)&&(v.tagNameCheck instanceof RegExp&&P(v.tagNameCheck,e)||v.tagNameCheck instanceof Function&&v.tagNameCheck(e))&&(v.attributeNameCheck instanceof RegExp&&P(v.attributeNameCheck,t)||v.attributeNameCheck instanceof Function&&v.attributeNameCheck(t))||t==="is"&&v.allowCustomizedBuiltInElements&&(v.tagNameCheck instanceof RegExp&&P(v.tagNameCheck,s)||v.tagNameCheck instanceof Function&&v.tagNameCheck(s))))return!1}else if(!ee[t]){if(!P(Ge,$e(s,ot,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&no(s,"data:")===0&&D[e])){if(!(st&&!P(nt,$e(s,ot,"")))){if(s)return!1}}}}}}return!0},Ft=function(e){return e!=="annotation-xml"&&Qt(e,ht)},zt=function(e){ce(d.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||vt(e))return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I,forceKeepAttr:void 0};let h=t.length;for(;h--;){const M=t[h],{name:C,namespaceURI:G,value:ue}=M,qe=R(C),Tt=ue;let k=C==="value"?Tt:oo(Tt);if(s.attrName=qe,s.attrValue=k,s.keepAttr=!0,s.forceKeepAttr=void 0,ce(d.uponSanitizeAttribute,e,s),k=s.attrValue,n&&(qe==="id"||qe==="name")&&(ze(C,e),k=a+k),le&&P(/((--!?|])>)|<\/(style|title)/i,k)){ze(C,e);continue}if(s.forceKeepAttr)continue;if(!s.keepAttr){ze(C,e);continue}if(!lt&&P(/\/>/i,k)){ze(C,e);continue}_e&&pt([de,Me,Ce],Bt=>{k=$e(k,Bt," ")});const Ht=R(e.nodeName);if(!Ut(Ht,qe,k)){ze(C,e);continue}if(y&&typeof O=="object"&&typeof O.getAttributeType=="function"&&!G)switch(O.getAttributeType(Ht,qe)){case"TrustedHTML":{k=y.createHTML(k);break}case"TrustedScriptURL":{k=y.createScriptURL(k);break}}if(k!==Tt)try{G?e.setAttributeNS(G,C,k):e.setAttribute(C,k),vt(e)?oe(e):Kt(o.removed)}catch{ze(C,e)}}ce(d.afterSanitizeAttributes,e,null)},En=function l(e){let t=null;const s=Mt(e);for(ce(d.beforeSanitizeShadowDOM,e,null);t=s.nextNode();)ce(d.uponSanitizeShadowNode,t,null),Pt(t),zt(t),t.content instanceof H&&l(t.content);ce(d.afterSanitizeShadowDOM,e,null)};return o.sanitize=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,s=null,h=null,M=null;if(Ee=!l,Ee&&(l="<!-->"),typeof l!="string"&&!kt(l))if(typeof l.toString=="function"){if(l=l.toString(),typeof l!="string")throw Xe("dirty is not a string, aborting")}else throw Xe("toString is not a function");if(!o.isSupported)return l;if(Pe||_t(e),o.removed=[],typeof l=="string"&&(r=!1),r){if(l.nodeName){const ue=R(l.nodeName);if(!S[ue]||we[ue])throw Xe("root node is forbidden and cannot be sanitized in-place")}}else if(l instanceof Ie)t=xt("<!---->"),s=t.ownerDocument.importNode(l,!0),s.nodeType===Ze.element&&s.nodeName==="BODY"||s.nodeName==="HTML"?t=s:t.appendChild(s);else{if(!N&&!_e&&!ie&&l.indexOf("<")===-1)return y&&ve?y.createHTML(l):l;if(t=xt(l),!t)return N?null:ve?se:""}t&&Ye&&oe(t.firstChild);const C=Mt(r?l:t);for(;h=C.nextNode();)Pt(h),zt(h),h.content instanceof H&&En(h.content);if(r)return l;if(N){if(Le)for(M=et.call(t.ownerDocument);t.firstChild;)M.appendChild(t.firstChild);else M=t;return(I.shadowroot||I.shadowrootmode)&&(M=xe.call(c,M,!0)),M}let G=ie?t.outerHTML:t.innerHTML;return ie&&S["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&P(hn,t.ownerDocument.doctype.name)&&(G="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+G),_e&&pt([de,Me,Ce],ue=>{G=$e(G,ue," ")}),y&&ve?y.createHTML(G):G},o.setConfig=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_t(l),Pe=!0},o.clearConfig=function(){Fe=null,Pe=!1},o.isValidAttribute=function(l,e,t){Fe||_t({});const s=R(l),h=R(e);return Ut(s,h,t)},o.addHook=function(l,e){typeof e=="function"&&Ve(d[l],e)},o.removeHook=function(l,e){if(e!==void 0){const t=eo(d[l],e);return t===-1?void 0:to(d[l],t,1)[0]}return Kt(d[l])},o.removeHooks=function(l){d[l]=[]},o.removeAllHooks=function(){d=an()},o}_n();const sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAxBJREFUWEfNV8tPE3EQ/mZ5BgywBR8gBw4aEzwpGr0aEzVRecWA8eZBQgtbiUKRxAMXo92GoG1TwQOJIRENCRKiiQf1L1BOaCIYPegBE+wuGHm13TFbaNNSYLcPlT3t7nzz/b6Z+e1vZwgxl8UpXWKCDcARACWxtgzcqwRMakRetcv9PMJH+o14r6UYlDsAossZWMgMxQi0Faty69H8mgCn9AyEpjVP/gLgJUOYIWY2w2aEYQECMarBqAWhfB0/ojg8V6jE2V5PROGUEPHjgqwc6/cb/UtGpKnYS/o7SiigDQN8IRwqcx1ZZOk1A6cBfFAWS4+it3d1l6t1TzbnNgtZwXH/Td+33bJtXwBZ54R8jPntnoWy/o7yUEC7GBRyxn519s0lIyZcbiHvI4AKAt6QKEt+vQoguq10ue+sl+QFCOcBTCgOT53okl6BcRagAcXhtoqy9BbAKQaNqg73eunMyxBlyQfACkDRBYTrzESNkd0ZBRD5lC53myhLUwAORwRZXPYhZr7KQJ/q8HSaX3oNKcr2NoC94bJHBTDXqd3eiQhZ0V3bgYUe32f9udjZfkwgNIdC2mDkXaw9eQGSHr2ehTgBDepSWVRAsqTJ4MUCvzUhA8kQZBIbLUEmSZPhihFATxj8KRnnVLEEOh45C7bchKmSm/ET5c03YdxXYIYoVczOF1DR21LwuzD3JDQh/LPa9tICk/M9DxUjWKzdMAOiLL0DUGOSdFapmq1E02jIJB4ZFcDAD7Vqdn9GBex1dRYuY/lENkgwiioYDL7PeAmMFk3XbliCdBcw8t/5Aiyy/T6Dr+l/yw3RfM1ioXGu+0FaR7ZhBiyyNM3AwU1TSWhVujyDRmnezm4ooMx5/VCQ+AygxX0FRPip5NEo7J6VvyGgQe32jqdDbNZ3Y0uW0JSaJUoVF9eUxrTlU8piaY3elqdKbMYvoS2PHUwYGFLzYUu3xlsJsbilIl7GMIBaHcNE9QmjGQEzGjBBoGkzEZnCsCaAUA1QA4DKdZ+10Ux/+OfDKfNT8GprdDiNRPE/xvM/dta63TIsys8AAAAASUVORK5CYII=",To={class:"search-result-box"},Eo={class:"file-box mr-[8px]"},Ao=["src"],yo={class:"search"},So={class:"model-item"},Io={class:"label"},Ro={class:"url"},bo={__name:"search-list",props:{list:{type:Array,default:()=>[]}},setup(u){rn(c=>({"467f6a3e":w(o)?"1px solid #dadada":"1px solid #3F3F3F"}));const{isLight:o}=cn(),p=c=>{c.url&&window.open(c.url,"_blank")};return(c,b)=>{const H=Ke("a-menu-item"),Y=Ke("a-menu"),Ie=Ke("a-dropdown");return x(),U("div",To,[j(Ie,null,{overlay:Se(()=>[j(Y,{class:"drop drop-style"},{default:Se(()=>[(x(!0),U(un,null,fn(u.list,(pe,K)=>(x(),pn(H,{key:K,onClick:Q=>p(pe)},{default:Se(()=>[A("div",So,[A("div",Io,Be(pe.title),1),A("div",Ro,Be(pe.url),1)])]),_:2},1032,["onClick"]))),128))]),_:1})]),default:Se(()=>[A("div",Eo,[A("img",{src:w(o)?w(sn):w(sn),class:"file-img"},null,8,Ao),A("div",yo,Be(c.$t("Searched {count} sites",{count:u.list.length})),1)])]),_:1})])}}},Co=ln(bo,[["__scopeId","data-v-9de8ca42"]]),wo={class:"container"},Lo=["onMouseenter","onMouseleave"],Do={class:"pro-top-item"},Oo={class:"problem-box"},No={key:0,class:"abs-file-box2"},xo={class:"name"},Mo={class:"problem",style:{display:"inline-block","white-space":"pre-line"}},ko={class:"pro-bottom-item"},Po=["src","onClick"],Uo=["onClick","src"],Fo=["onMouseenter","onMouseleave"],zo={class:"anw-item-top"},Ho=["src"],Bo=["innerHTML"],Go={key:3,class:"answer-point"},Wo={key:0,class:"ml-[46px]"},Yo={class:"anw-item-bottom"},qo=["src","onClick"],Vo=["src","onClick"],$o=["onClick","src"],Xo={key:1,class:"loading"},jo={class:"sendbox"},Zo={__name:"chat",setup(u){rn(n=>({"3684ac10":!w(p)&&w(c)?"fixed":"absolute","8b522cfc":w(b)?"35px":"16px"}));const{isLight:o}=cn(),{isWeb:p,isPortrait:c,isTablet:b}=An(),{t:H}=yn();Gt(o,()=>{}),At.setOptions({highlight:function(n,a){try{const m=He.getLanguage(a)?a:"plaintext";return He.highlight(n,{language:m}).value}catch(m){return console.warn("代码高亮失败:",m),He.highlightAuto(n).value}},breaks:!0,gfm:!0});const Y=_({}),Ie={code(n){const a=n.lang,m=n.text;console.log("---lang",a);debugger;const r=Wt(),i=m.replace(/</g,"&lt;").replace(/>/g,"&gt;");return Y.value[r]=m,`<div class='copy-btn' @click='copyClick' data-code='${encodeURIComponent(r)}'>${H("Copy")}</div><pre><code class="hljs language-${a}">${i}</code></pre>`}};At.use({renderer:Ie});const pe=In(),K=Sn(),Q=_(""),B=_(!1),Qe=_(""),O=_(""),q=_(""),ae=_(0),Re=_(0),be=_({}),Oe=_(-1),me=_(-1),y=_(-1),se=_(-1),Ne=_(null),Je=_(null),et=_(null),tt=_(null),xe=_(0),d=_(null),de=_(null),Me=_(""),Ce=_(!1),T=_([]);Gt(()=>pe.currentRoute.value,n=>{debugger;let a=n.query;T.value=[],a.conversationId&&O.value!=""&&a.conversationId!=O.value&&(O.value=a.conversationId,Le())},{immediate:!0});const gt=Rn(()=>ae.value==0?o.value?bn:Cn:be.value.botIcon),nt=(n,a)=>a=="left"?n==se.value?o.value?ft:ft:o.value?jt:$t:n==me.value?o.value?ft:ft:o.value?jt:$t,ot=n=>{xe.value=n},ht=n=>{d.value=n},Ge=async(n,a,m)=>{m=="left"?(tt.value=a,y.value=a,yt(n),se.value=y.value,y.value=-1,et.value=-1,Oe.value=-1):(et.value=a,Oe.value=a,yt(n),me.value=Oe.value,Oe.value=-1,tt.value=-1,y.value=-1),setTimeout(()=>{me.value=-1,se.value=-1},1e3)},S=async n=>{B.value||n&&le(n)},at=async n=>{Me.value=n,Q.value=n},I=(n,a)=>{a=="right"?Ne.value=n:Je.value=n},We=n=>{Je.value=null,Ne.value=null},v=async n=>{const a=document.createElement("a");a.href=n,a.download="image.png",a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},we=()=>{B.value=!0;let n=0;const a=setInterval(()=>{n=(n+1)%4,Qe.value=".".repeat(n),B.value||clearInterval(a)},500);return a},ge=_(null),he=()=>{ut(()=>{ge.value&&(ge.value.scrollTop=ge.value.scrollHeight)})},ke=(n,a)=>new Promise(m=>{const r=T.value[a];r.typingInterval&&clearInterval(r.typingInterval);let i=r.reply.length;const g=15;r.typingInterval=setInterval(()=>{i<n.length?(r.reply=n.substring(0,i+2),i++,ut(()=>{document.querySelectorAll("pre code").forEach(L=>{He.highlightElement(L)})}),he()):(clearInterval(r.typingInterval),r.isTypingComplete=!0,m())},g)}),st=async()=>{const n=T.value.length-1,a=T.value[n];var m="";if(d.value&&d.value.type.startsWith("image/")){const $=new Blob([d.value],{type:d.value.type});let ne=new FormData;ne.append("file",$,d.value.name);let X=await Pn(ne);console.log("上传文件结果:",X),X.code==200?(m=X.data.url,a.fileName=d.value.name):B.value=!1}de.value=new AbortController;let r={bundle:Et(),deviceMac:K.ip,conversationId:O.value||"",timestamp:Date.now().valueOf(),nonce:Wt(),question:Q.value,aiVersion:K.aiVersion};if(ae.value==1&&(r.botId=q.value,r.clientType="web"),Re.value==1){r.prompt=Q.value,r.size="1024x1024",r.style="natural",r.quality="hd",delete r.question,_e(r);return}m.length>0&&delete r.question,console.log("请求参数:",r),r.signature=Gn(r),r.needSearch=xe.value,m.length>0&&(r.question=Q.value);var i=Wn(JSON.stringify(r)),g={bundle:Et(),security:i};m&&(g.imageUrls=[m]),console.log("请求参数:",r),console.log("请求参数message:",g);let L="",D=Promise.resolve();var J="",ee="/dev-api",De=ee+"/chat/ai/sse/chat";ae.value==1&&(De=ee+"/botchat/sse/chat"),m.length>0&&(De=ee+"/image/ai/readImageSeeAnswer");var Te=!1;let re=new FormData;d.value&&!d.value.type.startsWith("image/")&&(Te=!0,re.append("file",d.value,d.value.name),re.append("bundle",Et()),re.append("security",i),De=ee+"/file/ai/readAndGetSummaryAndAnswerThis",a.fileName=d.value.name);let V={UserType:"app_user",Authorization:"Bearer "+Yt()},te={accept:"text/event-stream","accept-language":"zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7,tt;q=0.6",authorization:"Bearer "+Yt(),"cache-control":"no-cache","content-type":"application/json",usertype:"app_user"};g.file instanceof FormData?(delete te["content-type"],te["content-type"]="multipart/form-data"):g=JSON.stringify(g);var Ee="",Ue=0;qn(De,{method:"POST",headers:Te?V:te,referrerPolicy:"strict-origin-when-cross-origin",body:Te?re:g,signal:de.value.signal,openWhenHidden:!0,async onmessage($){var ne,X,rt,Ae;if(console.log("SSE消息：",$.data),Ue++,$.data==="[DONE]"){console.log("流结束"),d.value=null;debugger;(O.value==0||!O.value)&&qt.emit("refreshLeftList","chat"),Ee&&Ee.length>0&&(O.value=Ee,console.log("新的对话id:",O.value)),await D,B.value=!1,console.log("打字完成"),J&&xe.value==1&&lt(J);return}console.log("接收到数据:",Ue,new Date().valueOf());try{const E=JSON.parse($.data.trim()),ct=T.value[n];if((E==null?void 0:E.code)==-2){B.value=!1,ct.showGoVip=!0;return}else if((E==null?void 0:E.code)!=0){B.value=!1,L+=((ne=E==null?void 0:E.data)==null?void 0:ne.message)||"",D=ke(L,n);return}L+=((X=E==null?void 0:E.data)==null?void 0:X.answer)||"",J=(rt=E==null?void 0:E.data)==null?void 0:rt.message_id,Ee=(Ae=E==null?void 0:E.data)==null?void 0:Ae.conversation_id,ct.messageId=J,console.log("messageId",J),D=ke(L,n),he(),currentPos++,ut(()=>{document.querySelectorAll("pre code").forEach(R=>{He.highlightElement(R)})})}catch{}},onerror($){console.error("SSE 错误:",$)},onopen($){console.log("连接已打开",$)}})},lt=async n=>{const a=await Fn({messageId:n});if(a.code==200){var m=a.data;if(m&&m.length>0){const r=T.value.find(i=>(i==null?void 0:i.messageId)==n);r&&(r.searchResult=(a==null?void 0:a.data)||[])}}console.log("搜索结果:",a)},_e=async n=>{const a=T.value.length-1,m=T.value[a];let r=await Un(n);B.value=!1,r.code==200&&(console.log("图片生成成功:",r),m.reply=r.data.s3Url||r.data.gptUrl,console.log("图片生成成功:",T.value),qt.emit("refreshLeftList","chat"),he())},le=n=>{if(n.length==0)return;Q.value=n;let a={problem:n,reply:"",typingInterval:null};Re.value==1?a.type="pic":a.type="text",T.value.push(a),we(),st(),he()},ie=()=>{Pe()},Pe=()=>{de.value&&(de.value.abort(),B.value=!1,console.log("流已暂停"));const n=T.value[T.value.length-1];n!=null&&n.typingInterval&&clearInterval(n.typingInterval)},Ye=async()=>{Ce.value=!0;const n=await xn({conversationId:O.value});Ce.value=!1,n.code==200&&(T.value=[...T.value,...(n.rows||[]).reverse()],ae.value==1&&Re.value==1&&(T.value=T.value.map(a=>(a.type="pic",a))),ut(()=>{document.querySelectorAll("pre code").forEach(a=>{He.highlightElement(a)})})),he()};wn(()=>{Pe()});const N=Ln(),Le=async()=>{var m,r,i,g;O.value=(m=N==null?void 0:N.query)==null?void 0:m.conversationId;const n=N.query.key;if(q.value=(r=N==null?void 0:N.query)==null?void 0:r.botId,((i=N==null?void 0:N.query)==null?void 0:i.from)=="home"){ae.value=0;const L=Zn.getInstance();let D=L.getText(),J=L.getFile(),ee=L.getNeed();Q.value=D,d.value=J,xe.value=ee,le(D);return}if(q.value){ae.value=1;let L=await Dn(q.value);be.value=L.data,console.log("botInfo",be.value);debugger;T.value.push({reply:be.value.greeting,type:"text"}),(g=be.value.extendCapability)!=null&&g.includes("draw")?(Re.value=1,console.log("当前页面为图片类型")):Re.value=0}else ae.value=0;n&&(Q.value=n,le(n)),console.log("conversationId",O.value),console.log("botId",q.value),O.value&&Ye()},ve=()=>{const n=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${n}px`)},it=n=>{if(n.target.classList.contains("copy-btn")){const m=decodeURIComponent(n.target.dataset.code);var a=Y.value[m];a&&(yt(a),Mn({message:H("Copy Success"),type:"success",plain:!0,icon:kn("img",{src:Yn,style:{width:"16px",height:"16px",marginRight:"8px"}}),duration:3e3,customClass:"copy-message"}))}};return On(()=>{window.removeEventListener("resize",ve)}),Nn(async()=>{Le(),ve(),window.addEventListener("resize",ve),document.addEventListener("click",it)}),(n,a)=>{const m=Ke("el-tooltip"),r=Ke("a-spin");return x(),U("div",wo,[Ce.value?(x(),U("div",Xo,[j(r,{size:"large"})])):(x(),U("div",{key:0,class:"content",ref_key:"contentRef",ref:ge},[(x(!0),U(un,null,fn(T.value,(i,g)=>{var L;return x(),U("div",{key:g,class:"item"},[i.problem?(x(),U("div",{key:0,class:"pro-item",onMouseenter:D=>I(g,"right"),onMouseleave:D=>We()},[A("div",Do,[A("div",Oo,[i.fileName?(x(),U("div",No,[a[0]||(a[0]=A("img",{src:Bn,class:"w-[44px] h-[44px]"},null,-1)),A("div",xo,Be(i.fileName),1)])):ye("",!0),A("div",Mo,Be(i.problem),1)]),j(Vt,{class:"mt-[6px]"})]),A("div",ko,[j(m,{effect:w(o)?"light":"dark",content:n.$t("Copy"),placement:"top"},{default:Se(()=>[A("img",{src:nt(g,"right"),class:"copy_img",onClick:D=>Ge(i.problem,g,"right")},null,8,Po)]),_:2},1032,["effect","content"]),j(m,{effect:w(o)?"light":"dark",content:n.$t("Edit"),placement:"top"},{default:Se(()=>[A("img",{onClick:D=>at(i.problem),src:w(o)?w(Vn):w($n),class:"copy_img ml-[16px]"},null,8,Uo)]),_:2},1032,["effect","content"]),a[1]||(a[1]=A("div",{class:"w-[40px] h-[40px] ml-[6px]"},null,-1))])],40,Lo)):ye("",!0),A("div",{class:"anw-item",onMouseenter:D=>I(g,"left"),onMouseleave:D=>We()},[A("div",zo,[j(Vt,{class:"mr-[6px]",url:gt.value},null,8,["url"]),(i==null?void 0:i.type)=="pic"&&i.reply?(x(),U("img",{key:0,src:i.reply,class:"create_img"},null,8,Ho)):ye("",!0),i.reply&&i.type!="pic"?(x(),U("div",{class:zn(["answer",{typing:!i.isTypingComplete&&B.value}]),key:i.reply+g,innerHTML:w(At)(i.reply)},null,10,Bo)):ye("",!0),i.showGoVip?(x(),pn(Xn,{key:2})):i.reply.length<=0&&B.value&&g===T.value.length-1?(x(),U("div",Go,Be(Qe.value),1)):ye("",!0)]),((L=i==null?void 0:i.searchResult)==null?void 0:L.length)>0?(x(),U("div",Wo,[j(Co,{list:i.searchResult},null,8,["list"])])):ye("",!0),A("div",Yo,[a[2]||(a[2]=A("div",{class:"w-[40px] h-[40px] ml-[6px]"},null,-1)),i.type=="pic"&&i.reply?(x(),U("img",{key:0,src:w(jn),class:"copy_img mr-[16px]",onClick:D=>v(i.reply)},null,8,qo)):ye("",!0),j(m,{effect:w(o)?"light":"dark",content:n.$t("Copy"),placement:"top"},{default:Se(()=>[i.type!="pic"?(x(),U("img",{key:0,src:nt(g,"left"),class:"copy_img mr-[16px]",onClick:D=>Ge(i.reply,g,"left")},null,8,Vo)):ye("",!0)]),_:2},1032,["effect","content"]),j(m,{effect:w(o)?"light":"dark",content:n.$t("Retry"),placement:"top"},{default:Se(()=>[A("img",{onClick:D=>S(i.problem),src:w(o)?w(Xt):w(Xt),class:"copy_img"},null,8,$o)]),_:2},1032,["effect","content"])])],40,Fo)])}),128))],512)),A("div",jo,[j(Hn,{onOk:le,onStop:ie,loading:B.value,text:Me.value,onNeedSearch:ot,onNeedFile:ht},null,8,["loading","text"])])])}}},oa=ln(Zo,[["__scopeId","data-v-5b4d0c9c"]]);export{oa as default};
